---
title: "Завершение установки"
---

{% include toc title="Содержание" %}

### Обязательно к прочтению

Файл `boot.firm` - это то, что boot9strap запускает после загрузки из NAND, и этот файл может быть любым arm9-приложением. Этот файл может быть заменён когда угодно, однако Luma3DS позволяет запускать другие arm9 приложения в FIRM формате, используя свой загрузчик.

In this case, we use Luma3DS by [LumaTeam](https://github.com/LumaTeam/) to boot a patched SysNAND directly, allowing us to completely bypass the need for any kind of EmuNAND, vastly simplifying the usage of a hacked 3DS in addition to saving SD card space.

В процессе мы установим и настроим следующие программы:

+  **FBI** *(установщик приложений и игр в формате CIA)*
+  **Anemone3DS** *(установка пользовательских тем)*
+  **Checkpoint** *(создание и восстановление резервных копий сохранений 3DS и DS игр)*
+  **Universal-Updater** *(a homebrew app store for downloading homebrew from the 3DS over wifi)*
+  **GodMode9** *(многофункциональная утилита для работы с NAND и картриджами)*
+  **Homebrew Launcher Loader** *(запуск Homebrew Launcher)*
+  **DSP1** *(позволяет хоумбрю приложениям воспроизводить звук)*
+  **ctr-no-timeoffset** *(убирает смещение rtc, чтобы время в меню HOME совпадало со временем rtc)*

### Что понадобится

* Свежая версия [Anemone3DS](https://github.com/astronautlevel2/Anemone3DS/releases/latest) *(`.cia-файл`)*
* Свежая версия [Checkpoint](https://github.com/FlagBrew/Checkpoint/releases/latest) *(`.cia-файл`)*
* The latest release of [Universal-Updater](https://github.com/Universal-Team/Universal-Updater/releases/latest) *(the `.cia` file)*
* Свежая версия [Homebrew Launcher Wrapper](https://github.com/mariohackandglitch/homebrew_launcher_dummy/releases/latest)
* The latest release of [GodMode9](https://github.com/d0k3/GodMode9/releases/latest)
* The latest release of [DSP1](https://github.com/zoogie/DSP1/releases/latest) *(the `.cia` file)*
* Свежая версия [FBI](https://github.com/Steveice10/FBI/releases/latest) *(`.cia-файл` и `.3dsx-файл`)*
* Свежая версия [ctr-no-timeoffset](https://github.com/ihaveamac/ctr-no-timeoffset/releases/latest)

### Инструкция

#### Часть I - Подготовительные работы

1. Выключите консоль
1. Вставьте SD-карту в компьютер
1. Создайте папку `3ds` в корне SD-карты, если таковой нет
    + This folder stores homebrew applications and data; it is different from the `Nintendo 3DS` folder that the device automatically generates
1. Создайте папку `cias` в корне SD-карты, если таковой нет
1. Скопируйте `ctr-no-timeoffset.3dsx` в папку `/3ds/` на SD-карте
1. Скопируйте `FBI.3dsx` в папку `/3ds/` на SD-карте
1. Скопируйте `Homebrew_Launcher.cia` в папку `/cias/` на SD-карте
1. Скопируйте `FBI.cia` в папку `/cias/` на SD-карте
1. Скопируйте `DSP1.cia` в папку `/cias/` на SD-карте
1. Скопируйте `Anemone3DS.cia` в папку `/cias/` на SD-карте
1. Скопируйте `Checkpoint.cia` в папку `/cias/` на SD-карте
1. Copy `Universal-Updater.cia` to the `/cias/` folder on your SD card
1. Создайте папку `payloads` внутри папки `luma` на SD-карте, если таковой нет
1. Скопируйте `GodMode9.firm` из `.zip-архива` GodMode9 в папку `/luma/payloads/` на SD-карте
1. Скопируйте папку `gm9` из `.zip-архива` GodMode9 в корень SD-карты
1. Вставьте SD-карту обратно в консоль
1. Включите консоль

#### Часть II - Обновление системы

Если вы, следуя предыдущей версии этого руководства, выполнили CTRTransfer на прошивку 2.1.0 на *New 3DS*, обязательно [восстановите бэкап NAND](godmode9-usage#восстановление-бэкапа-nand), прежде чем приступить к этой части.
{: .notice--danger}

Если до начала этого руководства у вас уже был установлен EmuNAND, и вы хотите перенести содержимое EmuNAND в SysNAND с кастомной прошивкой - сейчас самый подходящий момент. Выполните действия из раздела [перенос EmuNAND](move-emunand), прежде чем приступить к этой части.
{: .notice--info}

1. Обновите прошивку консоли, зайдя в Системные настройки (System Settings), затем "Прочие настройки" (Other Settings), затем листайте вправо до конца и выберите пункт "Обновление" (System Update)
  + Обновление консоли с установленным B9S + Luma (установленых у вас) безопасно
  + Вместо начала процесса обновления может появиться сообщение "Система обновлена". Это нормально, если вы уже на последней версии прошивки; переходите к следующей части
  + При появлении ошибки, поставьте в настройках подключения, в настройках DNS "Получать DNS автоматически" в положение "Да"
  + If this still gives you an error, [follow this troubleshooting guide](troubleshooting#system-update-error-after-installing-cfw)

#### Часть III - Homebrew Launcher

1. Запустите приложение Загружаемая игра (![]({{ "/images/download-play-icon.png" | absolute_url }}){: height="24px" width="24px"})
1. Дождитесь появления двух кнопок
1. Нажмите (L) + (Вниз) + (Select) одновременно чтобы открыть меню Rosalina
1. Выберите "Miscellaneous options"
1. Выберите "Switch the hb. title to the current app."
1. Нажмите (B), чтобы продолжить
1. Нажмите (B) для возврата в главное меню Rosalina
1. Нажмите (B) для выхода из главного меню Rosalina
1. Нажмите (Home), затем закройте приложение Загружаемая игра
1. Запустите приложение Загружаемая игра
1. Консоль должна загрузиться в Homebrew Launcher
1. Выберите ctr-no-timeoffset в списке homebrew
1. Нажмите (A), чтобы установить смещение на 0
  + Это приведет системные часы в соответствие с RTC датой и временем (которые мы вскоре настроим)
1. Нажмите (Start), чтобы вернуться в Homebrew Launcher
1. Выберите FBI в списке homebrew

#### Часть IV - Установка CIA

1. Перейдите в `SD` -> `cias`
1. Выберите "\<current directory>"
1. Выберите "Install and delete all CIAs", нажмите (A) для подтверждения
1. Нажмите (Home), затем закройте приложение Загружаемая игра

#### Часть V - DSP Dump

1. Запустите DSP1
1. После завершения нажмите (B) чтобы удалить это приложение и вернуться в меню HOME

#### Часть VI - CTRNAND Luma3DS

1. Выключите консоль
1. Press and hold (Start), and while holding (Start), power on your device. This will launch GodMode9
  + If you do not boot into GodMode9, ensure that `GodMode9.firm` is in `/luma/payloads/` and that `payloads` is correctly spelled
1. Если вам предложат создать бэкап важных файлов, нажмите кнопку (A) чтобы сделать это, затем нажмите (A) чтобы продолжить после завершения
1. Если вам предложат выставить RTC дату и время, нажмите кнопку (A) чтобы сделать это, настройте дату и время, затем нажмите (A) чтобы продолжить
1. Нажмите кнопку (Home) для вызова меню
1. Выберите "Scripts..."
1. Выберите "GM9Megascript"
1. Выберите "Scripts from Plailect's Guide"
1. Выберите "Setup Luma3DS to CTRNAND"
1. При появлении запроса, нажмите (A) для продолжения
1. Нажмите (A), чтобы разрешить запись в SysNAND (lvl1) и введите указанную комбинацию кнопок
1. Нажмите (A), чтобы продолжить

#### Часть VII - Очистка SD-карты

1. Выберите "Cleanup SD Card"
1. При появлении запроса, нажмите (A) для продолжения
1. Нажмите (A), чтобы продолжить
1. Нажмите (B) для возврата в главное меню

#### Часть VIII - Бэкап важных файлов

1. Выберите "Backup Options"
1. Выберите "SysNAND Backup"
1. Нажмите (A) для подтверждения
  + Этот процесс займет некоторое время
  + Если появляется ошибка, убедитесь, что у вас есть по крайней мере 1,3 ГБ свободного места на SD-карте
1. Нажмите (A), чтобы продолжить
1. Нажмите (B) для возврата в главное меню
1. Выберите "Exit"
1. Нажмите (A) чтобы восстановить запрет на запись, если появится запрос
1. Перейдите в `[M:] MEMORY VIRTUAL`
1. Нажмите (A) чтобы выбрать файл `boot9.bin`
1. Выберите "Copy to 0:/gm9/out"
1. Нажмите (A), чтобы продолжить
1. Нажмите кнопку (Home) для вызова меню
1. Выберите "Poweroff system" чтобы выключить консоль
1. Вставьте SD-карту в компьютер
1. Скопируйте `<date>_<serialnumber>_sysnand_###.bin`, `<date>_<serialnumber>_sysnand_###.bin.sha`, `essential.exefs` и `boot9.bin` из папки `/gm9/out/` на SD-карте в безопасное место на вашем компьютере
  + Сделайте несколько резервных копий в нескольких местах (например в облачном хранилище)
  + Эти бэкапы позволят восстановить консоль и/или извлечь файлы из образа NAND, если что-то пойдёт не так
1. После копирования удалите `<date>_<serialnumber>_sysnand_###.bin` и `<date>_<serialnumber>_sysnand_###.bin.sha` из папки `/gm9/out/` на SD-карте
1. Вставьте SD-карту обратно в консоль
1. Включите консоль

___

#### Информация и замечания

{% capture notice-6 %}
You will now boot Luma3DS CFW by default.

Для запуска конфигуратора Luma3DS включите консоль с зажатой кнопкой (Select).

Теперь вы можете удерживать (Start) при загрузке для запуска меню Luma3DS chainloader (обратите внимание, что меню Luma3DS chainloader отображается только если существует более одного приложения).

Теперь, с помощью зажатой комбинации клавиш (Start) + (Select) + (X) при включении консоли, вы сможете сохранить копии ARM11 bootrom (`boot11.bin`), ARM9 bootrom (`boot9.bin`) и уникального OTP вашей консоли (`OTP.bin`) в папку `/boot9strap/` на SD-карте (обратите внимание, что этот процесс не предусматривает отображения какого-либо оповещения).

Теперь нажатие (L) + (Вниз) + (Select) в запущенной системе открывает меню Rosalina, встроенное в Luma3DS. Полный список функций Rosalina можно найти тут: [Luma3DS v8.0 Release](https://github.com/AuroraWright/Luma3DS/releases/tag/v8.0) (англ.)
{% endcapture %}

<div class="notice--info">{{ notice-6 | markdownify }}</div>

{% capture notice-6 %}
Если вы захотите заменить SD-карту на карту большего размера, вам нужно просто отформатировать новую карту в FAT32 и скопировать все содержимое старой SD-карты на новую.

If your new SD card is bigger than 32GB, then you have to use a different tool to format it, such as [guiformat (Windows)](formatting-sd-(windows)), [Disk Utility (Mac)](formatting-sd-(mac)), or [cfdisk (Linux)](formatting-sd-(linux)).
{% endcapture %}

<div class="notice--info">{{ notice-6 | markdownify }}</div>

Чтобы узнать, как сменить регион своей консоли, обратитесь к разделу [Смена региона](region-changing).
{: .notice--success}

Для получения информации по использованию различных функций GodMode9 обратитесь к [Использование GodMode9](godmode9-usage).
{: .notice--success}

Для справки об использовании различных функций Luma3DS обратитесь к её [вики](https://github.com/AuroraWright/Luma3DS/wiki/Options-and-usage) (англ.).
{: .notice--success}

For information on installing custom themes and splash screens, check out [Theme Plaza](https://themeplaza.art/).
{: .notice--success}

Для получения информации об использовании чит-кодов Gateshark на Luma3DS, посетите [Checkpoint](https://github.com/FlagBrew/Checkpoint).
{: .notice--success}
